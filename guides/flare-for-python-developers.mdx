---
slug: flare-for-python-developers
title: Flare for Python Developers
authors: [dineshpinto]
tags: [python, quickstart, web3py]
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

This guide is for developers who want to interact with Flare using Python. You can interact with Flare using [web3.py](https://web3py.readthedocs.io/en/stable/), a library featuring both synchronous and asynchronous interfaces for interacting with Ethereum-like chains.

{/* truncate */}

## Getting started

### Installation

<Tabs>
  <TabItem value="poetry" label="poetry" default>
    ```bash
    poetry add web3
    ```

  </TabItem>
  <TabItem value="pip" label="pip">
    ```bash
    pip install web3
    ```

  </TabItem>
</Tabs>

### Usage

You need to connect to testnet or mainnet via an RPC, any RPC listed on the [Network Configuration](../docs/flare/configuration#configuration) page will work. For this guide, you can use the Ankr RPC.

<Tabs groupId="network">
  <TabItem value="coston2" label="Coston2 Testnet" default>

    ```python
    from web3 import Web3
    from web3.middleware.geth_poa import geth_poa_middleware

    # Inject middleware to handle testnet PoA consensus
    w3 = Web3(Web3.HTTPProvider('https://rpc.ankr.com/flare_coston2'), middlewares=[geth_poa_middleware])
    print(f"Chain ID: {w3.eth.chain_id}")
    # Chain ID: 114
    ```

  </TabItem>
    <TabItem value="flare" label="Flare Mainnet">

    ```python
    from web3 import Web3

    w3 = Web3(Web3.HTTPProvider('https://rpc.ankr.com/flare'))
    print(f"Chain ID: {w3.eth.chain_id}")
    # Chain ID: 14
    ```

  </TabItem>
</Tabs>

## Query a contract

To query a contract, two pieces of information are required:

- Contract address
- Contract ABI (Application Binary Interface)

For this example, you can use the `FlareContractRegistry` contract which has the same address `0xaD67FE66660Fb8dFE9d6b1b4240d8650e30F6019` across both testnet and mainnet.

### Fetch ABI

To fetch a contract's ABI programmatically, you can query the [Flare Explorer API](https://flare-explorer.flare.network/api-docs):

<Tabs groupId="network">
  <TabItem value="coston2" label="Coston2 Testnet" default>

    ```python
    import requests
    import json

    contract_addr = "0xaD67FE66660Fb8dFE9d6b1b4240d8650e30F6019"
    params = {"module": "contract", "action": "getabi", "address": contract_addr}
    response = requests.get("https://coston2-explorer.flare.network/api", params).json()
    abi = json.loads(response["result"])
    ```

  </TabItem>
    <TabItem value="flare" label="Flare Mainnet">

    ```python
    import requests
    import json

    contract_addr = "0xaD67FE66660Fb8dFE9d6b1b4240d8650e30F6019"
    params = {"module": "contract", "action": "getabi", "address": contract_addr}
    response = requests.get("https://flare-explorer.flare.network/api", params).json()
    abi = json.loads(response["result"])
    ```

  </TabItem>
</Tabs>

### Make query

Using this `abi` you can query the `FlareContractRegistry` contract to get the addresses of other Flare contracts.

For example, querying it for the address of the `WNat` contract:

<Tabs groupId="network">
  <TabItem value="coston2" label="Coston2 Testnet" default>

    ```python
    contract = w3.eth.contract(contract_addr, abi=abi)
    print(contract.functions.getContractAddressByName('WNat').call())
    # 0xC67DCE33D7A8efA5FfEB961899C73fe01bCe9273
    ```

  </TabItem>
    <TabItem value="flare" label="Flare Mainnet">

    ```python
    contract = w3.eth.contract(contract_addr, abi=abi)
    print(contract.functions.getContractAddressByName('WNat').call())
    # 0x1D80c49BbBCd1C0911346656B529DF9E5c2F783d
    ```

  </TabItem>
</Tabs>

### Complete code

<Tabs groupId="network">
  <TabItem value="coston2" label="Coston2 Testnet" default>
    <details>
    <summary>Complete code for querying a contract on Coston2 Testnet</summary>

    ```python
    import requests
    import json

    from web3 import Web3
    from web3.middleware.geth_poa import geth_poa_middleware

    # Inject middleware to handle testnet PoA consensus
    w3 = Web3(Web3.HTTPProvider('https://rpc.ankr.com/flare_coston2'), middlewares=[geth_poa_middleware])
    print(f"Chain ID: {w3.eth.chain_id}")
    # Chain ID: 114

    # Fetch ABI
    registry_addr = "0xaD67FE66660Fb8dFE9d6b1b4240d8650e30F6019"
    params = {"module": "contract", "action": "getabi", "address": registry_addr}
    response = requests.get("https://coston2-explorer.flare.network/api", params).json()
    abi = json.loads(response["result"])

    # Query contract
    registry = w3.eth.contract(registry_addr, abi=abi)
    print(contract.functions.getContractAddressByName('WNat').call())
    # 0xC67DCE33D7A8efA5FfEB961899C73fe01bCe9273
    ```

    </details>

</TabItem>
<TabItem value="flare" label="Flare Mainnet">
    <details>
    <summary>Complete code for querying a contract on Flare Mainnet</summary>

    ```python
    import requests
    import json

    from web3 import Web3

    w3 = Web3(Web3.HTTPProvider('https://rpc.ankr.com/flare'))
    print(f"Chain ID: {w3.eth.chain_id}")
    # Chain ID: 14

    # Fetch ABI
    registry_addr = "0xaD67FE66660Fb8dFE9d6b1b4240d8650e30F6019"
    params = {"module": "contract", "action": "getabi", "address": registry_addr}
    response = requests.get("https://flare-explorer.flare.network/api", params).json()
    abi = json.loads(response["result"])

    # Query contract
    registry = w3.eth.contract(registry_addr, abi=abi)
    print(contract.functions.getContractAddressByName('WNat').call())
    # 0x1D80c49BbBCd1C0911346656B529DF9E5c2F783d
    ```
    </details>

</TabItem>
</Tabs>

## Compiling a contract

## Interacting with the compiled contract
